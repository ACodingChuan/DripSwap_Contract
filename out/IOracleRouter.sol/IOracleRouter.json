{"abi":[{"type":"function","name":"getUSDPrice","inputs":[{"name":"token","type":"address","internalType":"address"}],"outputs":[{"name":"priceE18","type":"uint256","internalType":"uint256"},{"name":"updatedAt","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"latestAnswer","inputs":[{"name":"base","type":"address","internalType":"address"},{"name":"quote","type":"address","internalType":"address"}],"outputs":[{"name":"priceE18","type":"uint256","internalType":"uint256"},{"name":"updatedAt","type":"uint256","internalType":"uint256"},{"name":"src","type":"uint8","internalType":"enum IOracleRouter.PriceSrc"}],"stateMutability":"view"}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"getUSDPrice(address)":"8b2f0f4f","latestAnswer(address,address)":"d4c282a3"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"getUSDPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"priceE18\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"updatedAt\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"base\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"quote\",\"type\":\"address\"}],\"name\":\"latestAnswer\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"priceE18\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"updatedAt\",\"type\":\"uint256\"},{\"internalType\":\"enum IOracleRouter.PriceSrc\",\"name\":\"src\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Guard \\u4fa7\\u53ea\\u4f9d\\u8d56\\u672c\\u63a5\\u53e3\\uff1b\\u5177\\u4f53\\u5b9e\\u73b0\\u7531 ChainlinkOracle \\u7b49\\u63d0\\u4f9b\",\"kind\":\"dev\",\"methods\":{\"getUSDPrice(address)\":{\"details\":\"\\u4e3a\\u4fdd\\u6301\\u63a5\\u53e3\\u7b80\\u6d01\\uff0c\\u8fd9\\u91cc\\u4e0d\\u8fd4\\u56de src\\uff1bGuard \\u4e00\\u822c\\u4f7f\\u7528 latestAnswer()\",\"params\":{\"token\":\"\\u8d44\\u4ea7\\u5730\\u5740\"},\"returns\":{\"priceE18\":\" \\u4ef7\\u683c(1e18)\\uff0c\\u542b\\u4e49\\uff1a1 token = priceE18 / 1e18 USD\",\"updatedAt\":\"\\u94fe\\u4e0a\\u66f4\\u65b0\\u65f6\\u95f4\\uff08Fixed \\u573a\\u666f\\u8fd4\\u56de\\u5f53\\u524d\\u5757\\u65f6\\u95f4\\uff09\"}},\"latestAnswer(address,address)\":{\"params\":{\"base\":\"\\u8ba1\\u4ef7\\u57fa\\u51c6\\uff08\\u5206\\u5b50\\uff09\",\"quote\":\"\\u8ba1\\u4ef7\\u6807\\u7684\\uff08\\u5206\\u6bcd\\uff09\"},\"returns\":{\"priceE18\":\" \\u4ef7\\u683c(1e18)\\uff0c\\u542b\\u4e49\\uff1a1 base = priceE18 / 1e18 \\u4e2a quote\",\"src\":\"      \\u4ef7\\u6e90\\u7c7b\\u578b\\uff08UsdSplit / Fixed\\uff09\",\"updatedAt\":\"\\u8be5\\u4ef7\\u683c\\u7684 on-chain \\u66f4\\u65b0\\u65f6\\u95f4\\uff08\\u4e24\\u4fa7USD\\u4ef7\\u7684\\u6700\\u5c0f\\u503c\\uff1b\\u53ccFixed\\u65f6\\u7ed9\\u5f53\\u524d\\u5757\\u65f6\\u95f4\\uff09\"}}},\"title\":\"IOracleRouter\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"getUSDPrice(address)\":{\"notice\":\"\\u67e5\\u8be2 token \\u7684 USD \\u4ef7\\u683c\\uff081e18\\uff09\\u4e0e\\u66f4\\u65b0\\u65f6\\u95f4\"},\"latestAnswer(address,address)\":{\"notice\":\"\\u67e5\\u8be2 base/quote \\u7684\\u516c\\u5141\\u4ef7\\uff081e18\\uff09\\u4e0e\\u66f4\\u65b0\\u65f6\\u95f4\\u4e0e\\u4ef7\\u6e90\\u7c7b\\u578b\"}},\"notice\":\"\\u7edf\\u4e00\\u7684\\u201c\\u9884\\u8a00\\u673a\\u8def\\u7531\\u201d\\u63a5\\u53e3\\uff1a         - \\u4efb\\u610f base/quote \\u8fd4\\u56de\\u516c\\u5141\\u4ef7\\uff081e18\\u7cbe\\u5ea6\\uff09+ \\u66f4\\u65b0\\u65f6\\u95f4 + \\u4ef7\\u6e90\\u7c7b\\u578b\\uff08src\\uff09         - \\u4e5f\\u53ef\\u76f4\\u63a5\\u67e5\\u8be2 token \\u7684 USD \\u4ef7\\u683c\\uff081e18\\u7cbe\\u5ea6\\uff09\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/interfaces/IOracleRouter.sol\":\"IOracleRouter\"},\"evmVersion\":\"prague\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":2000},\"remappings\":[\":@openzeppelin/=lib/openzeppelin-contracts/\",\":@uniswap/v2-core/=lib/v2-core/\",\":@uniswap/v2-periphery/=lib/v2-periphery/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":v2-core/=lib/v2-core/contracts/\",\":v2-periphery/=lib/v2-periphery/contracts/\"],\"viaIR\":true},\"sources\":{\"src/interfaces/IOracleRouter.sol\":{\"keccak256\":\"0x4e605f19318611d909ec2fc00c4c3b99d1aebabb0b2e652cca8bc6e0ae687a40\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://dcb9833e999b5c6e9c2f453370dc495144a2243c9b088e5da921bbe3ec81361d\",\"dweb:/ipfs/QmVQoee94NgaWiiGN8RZRRrTHgJsJSSk2zRFR2KFeoaiPY\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.30+commit.73712a01"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"token","type":"address"}],"stateMutability":"view","type":"function","name":"getUSDPrice","outputs":[{"internalType":"uint256","name":"priceE18","type":"uint256"},{"internalType":"uint256","name":"updatedAt","type":"uint256"}]},{"inputs":[{"internalType":"address","name":"base","type":"address"},{"internalType":"address","name":"quote","type":"address"}],"stateMutability":"view","type":"function","name":"latestAnswer","outputs":[{"internalType":"uint256","name":"priceE18","type":"uint256"},{"internalType":"uint256","name":"updatedAt","type":"uint256"},{"internalType":"enum IOracleRouter.PriceSrc","name":"src","type":"uint8"}]}],"devdoc":{"kind":"dev","methods":{"getUSDPrice(address)":{"details":"为保持接口简洁，这里不返回 src；Guard 一般使用 latestAnswer()","params":{"token":"资产地址"},"returns":{"priceE18":" 价格(1e18)，含义：1 token = priceE18 / 1e18 USD","updatedAt":"链上更新时间（Fixed 场景返回当前块时间）"}},"latestAnswer(address,address)":{"params":{"base":"计价基准（分子）","quote":"计价标的（分母）"},"returns":{"priceE18":" 价格(1e18)，含义：1 base = priceE18 / 1e18 个 quote","src":"      价源类型（UsdSplit / Fixed）","updatedAt":"该价格的 on-chain 更新时间（两侧USD价的最小值；双Fixed时给当前块时间）"}}},"version":1},"userdoc":{"kind":"user","methods":{"getUSDPrice(address)":{"notice":"查询 token 的 USD 价格（1e18）与更新时间"},"latestAnswer(address,address)":{"notice":"查询 base/quote 的公允价（1e18）与更新时间与价源类型"}},"version":1}},"settings":{"remappings":["@openzeppelin/=lib/openzeppelin-contracts/","@uniswap/v2-core/=lib/v2-core/","@uniswap/v2-periphery/=lib/v2-periphery/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/","v2-core/=lib/v2-core/contracts/","v2-periphery/=lib/v2-periphery/contracts/"],"optimizer":{"enabled":true,"runs":2000},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/interfaces/IOracleRouter.sol":"IOracleRouter"},"evmVersion":"prague","libraries":{},"viaIR":true},"sources":{"src/interfaces/IOracleRouter.sol":{"keccak256":"0x4e605f19318611d909ec2fc00c4c3b99d1aebabb0b2e652cca8bc6e0ae687a40","urls":["bzz-raw://dcb9833e999b5c6e9c2f453370dc495144a2243c9b088e5da921bbe3ec81361d","dweb:/ipfs/QmVQoee94NgaWiiGN8RZRRrTHgJsJSSk2zRFR2KFeoaiPY"],"license":"MIT"}},"version":1},"ast":{"absolutePath":"src/interfaces/IOracleRouter.sol","id":11528,"exportedSymbols":{"IOracleRouter":[11527]},"nodeType":"SourceUnit","src":"32:1722:31","nodes":[{"id":11496,"nodeType":"PragmaDirective","src":"32:24:31","nodes":[],"literals":["solidity","^","0.8",".24"]},{"id":11527,"nodeType":"ContractDefinition","src":"391:1362:31","nodes":[{"id":11501,"nodeType":"EnumDefinition","src":"622:33:31","nodes":[],"canonicalName":"IOracleRouter.PriceSrc","documentation":{"id":11498,"nodeType":"StructuredDocumentation","src":"421:196:31","text":"@dev 价源类型：\n      - UsdSplit: 由 base/USD 与 quote/USD 拼出 base/quote\n      - Fixed   : 固定锚价（用于测试网/无Feed场景），不参与 staleness 判定"},"members":[{"id":11499,"name":"UsdSplit","nameLocation":"638:8:31","nodeType":"EnumValue","src":"638:8:31"},{"id":11500,"name":"Fixed","nameLocation":"648:5:31","nodeType":"EnumValue","src":"648:5:31"}],"name":"PriceSrc","nameLocation":"627:8:31"},{"id":11516,"nodeType":"FunctionDefinition","src":"1111:149:31","nodes":[],"documentation":{"id":11502,"nodeType":"StructuredDocumentation","src":"661:445:31","text":"@notice 查询 base/quote 的公允价（1e18）与更新时间与价源类型\n @param base   计价基准（分子）\n @param quote  计价标的（分母）\n @return priceE18  价格(1e18)，含义：1 base = priceE18 / 1e18 个 quote\n @return updatedAt 该价格的 on-chain 更新时间（两侧USD价的最小值；双Fixed时给当前块时间）\n @return src       价源类型（UsdSplit / Fixed）"},"functionSelector":"d4c282a3","implemented":false,"kind":"function","modifiers":[],"name":"latestAnswer","nameLocation":"1120:12:31","parameters":{"id":11507,"nodeType":"ParameterList","parameters":[{"constant":false,"id":11504,"mutability":"mutable","name":"base","nameLocation":"1141:4:31","nodeType":"VariableDeclaration","scope":11516,"src":"1133:12:31","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":11503,"name":"address","nodeType":"ElementaryTypeName","src":"1133:7:31","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":11506,"mutability":"mutable","name":"quote","nameLocation":"1155:5:31","nodeType":"VariableDeclaration","scope":11516,"src":"1147:13:31","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":11505,"name":"address","nodeType":"ElementaryTypeName","src":"1147:7:31","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"1132:29:31"},"returnParameters":{"id":11515,"nodeType":"ParameterList","parameters":[{"constant":false,"id":11509,"mutability":"mutable","name":"priceE18","nameLocation":"1217:8:31","nodeType":"VariableDeclaration","scope":11516,"src":"1209:16:31","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":11508,"name":"uint256","nodeType":"ElementaryTypeName","src":"1209:7:31","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":11511,"mutability":"mutable","name":"updatedAt","nameLocation":"1235:9:31","nodeType":"VariableDeclaration","scope":11516,"src":"1227:17:31","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":11510,"name":"uint256","nodeType":"ElementaryTypeName","src":"1227:7:31","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":11514,"mutability":"mutable","name":"src","nameLocation":"1255:3:31","nodeType":"VariableDeclaration","scope":11516,"src":"1246:12:31","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_enum$_PriceSrc_$11501","typeString":"enum IOracleRouter.PriceSrc"},"typeName":{"id":11513,"nodeType":"UserDefinedTypeName","pathNode":{"id":11512,"name":"PriceSrc","nameLocations":["1246:8:31"],"nodeType":"IdentifierPath","referencedDeclaration":11501,"src":"1246:8:31"},"referencedDeclaration":11501,"src":"1246:8:31","typeDescriptions":{"typeIdentifier":"t_enum$_PriceSrc_$11501","typeString":"enum IOracleRouter.PriceSrc"}},"visibility":"internal"}],"src":"1208:51:31"},"scope":11527,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":11526,"nodeType":"FunctionDefinition","src":"1631:120:31","nodes":[],"documentation":{"id":11517,"nodeType":"StructuredDocumentation","src":"1266:360:31","text":"@notice 查询 token 的 USD 价格（1e18）与更新时间\n @dev    为保持接口简洁，这里不返回 src；Guard 一般使用 latestAnswer()\n @param  token  资产地址\n @return priceE18  价格(1e18)，含义：1 token = priceE18 / 1e18 USD\n @return updatedAt 链上更新时间（Fixed 场景返回当前块时间）"},"functionSelector":"8b2f0f4f","implemented":false,"kind":"function","modifiers":[],"name":"getUSDPrice","nameLocation":"1640:11:31","parameters":{"id":11520,"nodeType":"ParameterList","parameters":[{"constant":false,"id":11519,"mutability":"mutable","name":"token","nameLocation":"1660:5:31","nodeType":"VariableDeclaration","scope":11526,"src":"1652:13:31","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":11518,"name":"address","nodeType":"ElementaryTypeName","src":"1652:7:31","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"1651:15:31"},"returnParameters":{"id":11525,"nodeType":"ParameterList","parameters":[{"constant":false,"id":11522,"mutability":"mutable","name":"priceE18","nameLocation":"1722:8:31","nodeType":"VariableDeclaration","scope":11526,"src":"1714:16:31","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":11521,"name":"uint256","nodeType":"ElementaryTypeName","src":"1714:7:31","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":11524,"mutability":"mutable","name":"updatedAt","nameLocation":"1740:9:31","nodeType":"VariableDeclaration","scope":11526,"src":"1732:17:31","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":11523,"name":"uint256","nodeType":"ElementaryTypeName","src":"1732:7:31","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1713:37:31"},"scope":11527,"stateMutability":"view","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[],"canonicalName":"IOracleRouter","contractDependencies":[],"contractKind":"interface","documentation":{"id":11497,"nodeType":"StructuredDocumentation","src":"58:333:31","text":"@title IOracleRouter\n @notice 统一的“预言机路由”接口：\n         - 任意 base/quote 返回公允价（1e18精度）+ 更新时间 + 价源类型（src）\n         - 也可直接查询 token 的 USD 价格（1e18精度）\n @dev    Guard 侧只依赖本接口；具体实现由 ChainlinkOracle 等提供"},"fullyImplemented":false,"linearizedBaseContracts":[11527],"name":"IOracleRouter","nameLocation":"401:13:31","scope":11528,"usedErrors":[],"usedEvents":[]}],"license":"MIT"},"id":31}